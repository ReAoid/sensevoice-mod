# 快速使用指南

## 🚀 5分钟快速上手

### 第一步：安装环境

```bash
# 安装依赖
pip install -r requirements.txt

# 或者运行快速启动脚本
bash quick_start.sh
```

### 第二步：启动Web界面

```bash
python webui_integrated.py
```

浏览器打开：http://localhost:7860

### 第三步：开始使用

#### 场景1: 只需要语音识别（不使用说话人识别）

1. 在"语音识别"标签页上传音频
2. 选择语言（建议auto）
3. **不勾选"启用说话人识别"**
4. 点击"开始识别"
5. 查看识别结果

#### 场景2: 需要识别说话人身份

**步骤A - 先注册声纹：**

1. 切换到"声纹管理"标签页
2. 填写说话人ID（如：user001）
3. 填写说话人名称（如：张三）
4. 上传该人的音频（3-10秒纯净人声）
5. 点击"注册声纹"
6. 等待注册完成

**步骤B - 识别说话人：**

1. 回到"语音识别"标签页
2. 上传要识别的音频
3. **勾选"启用说话人识别"**
4. 点击"开始识别"
5. 查看说话人信息和识别结果

---

## 💻 命令行快速使用

### 基础语音识别

```bash
python integrated_asr.py --audio test.wav
```

### 启用说话人识别

```bash
# 1. 先注册声纹
python register_voiceprint.py \
  --action register \
  --speaker-id user001 \
  --speaker-name "张三" \
  --audio voice.wav

# 2. 识别
python integrated_asr.py --audio test.wav --enable-speaker
```

---

## 📝 功能切换说明

### 方法1: Web界面切换

- **勾选"启用说话人识别"** = 开启说话人识别
- **取消勾选** = 关闭说话人识别

### 方法2: 命令行切换

```bash
# 关闭说话人识别（默认）
python integrated_asr.py --audio test.wav

# 开启说话人识别
python integrated_asr.py --audio test.wav --enable-speaker
```

### 方法3: 配置文件切换

编辑 `config_3dspeaker.yaml`：

```yaml
speaker_verification:
  enabled: true   # true=开启, false=关闭
```

### 方法4: Python代码切换

```python
from integrated_asr import IntegratedASRSystem

# 创建系统（关闭说话人识别）
system = IntegratedASRSystem(enable_speaker_verification=False)

# 处理音频（不识别说话人）
result1 = system.process_audio("test1.wav")

# 动态开启说话人识别
system.toggle_speaker_verification(True)

# 处理音频（识别说话人）
result2 = system.process_audio("test2.wav")
```

---

## 🎯 完整流程图

```
┌─────────────────────────────────────────┐
│          开始使用系统                     │
└─────────────────────────────────────────┘
                    ↓
        ┌───────────────────────┐
        │  需要识别说话人吗？      │
        └───────────────────────┘
              ↓           ↓
            是            否
              ↓           ↓
    ┌─────────────┐   ┌─────────────┐
    │ 注册声纹     │   │ 直接识别     │
    │ (声纹管理)   │   │ (语音识别)   │
    └─────────────┘   └─────────────┘
              ↓               ↓
    ┌─────────────┐           ↓
    │ 启用说话人   │           ↓
    │ 识别开关     │           ↓
    └─────────────┘           ↓
              ↓               ↓
    ┌──────────────────────────┐
    │      上传音频文件         │
    └──────────────────────────┘
              ↓
    ┌──────────────────────────┐
    │      开始识别             │
    └──────────────────────────┘
              ↓
    ┌──────────────────────────┐
    │      查看结果             │
    │  • 识别文本               │
    │  • 情感标签               │
    │  • 事件标签               │
    │  • 说话人信息(如果启用)    │
    └──────────────────────────┘
```

---

## 🔍 常见问题速查

### Q: 首次运行很慢？
A: 首次运行需要下载模型，请耐心等待。后续使用会很快。

### Q: 识别准确率不高？
A: 
- 检查音频质量
- 调整识别阈值（在配置文件中）
- 使用更好的录音设备

### Q: GPU内存不够？
A: 修改配置文件，设置 `device: "cpu"`

### Q: 如何提高速度？
A: 
- 使用GPU
- 关闭不需要的功能
- 批量处理而不是逐个处理

---

## 📚 详细文档

查看完整文档：[README_3DSpeaker.md](README_3DSpeaker.md)

包含：
- 详细使用教程
- API接口说明
- 配置文件详解
- 性能优化建议
- 常见问题解答
- 技术细节

---

## 🆘 获取帮助

- **使用说明**: 查看Web界面的"使用说明"标签页
- **详细文档**: README_3DSpeaker.md
- **问题反馈**: GitHub Issues
- **技术交流**: 钉钉交流群

---

**祝您使用愉快！** 🎉

